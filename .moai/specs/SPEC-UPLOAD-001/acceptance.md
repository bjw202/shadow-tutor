---
id: SPEC-UPLOAD-001
document_type: acceptance-criteria
version: "1.0.0"
created: "2026-01-06"
updated: "2026-01-06"
---

# SPEC-UPLOAD-001: 인수 조건

## 관련 SPEC

- [spec.md](./spec.md) - EARS 요구사항 명세
- [plan.md](./plan.md) - 구현 계획

---

## 1. 기능 테스트 시나리오

### AC-001: 정상적인 텍스트 파일 업로드

```gherkin
Feature: 텍스트 파일 업로드
  사용자가 .txt 파일을 업로드하여 쉐도잉 연습에 사용할 수 있다

  Scenario: 유효한 .txt 파일 드래그 앤 드롭
    Given 사용자가 업로드 페이지에 있다
    And 1MB 미만의 유효한 .txt 파일이 있다
    When 사용자가 파일을 드롭존에 드래그 앤 드롭한다
    Then 파일이 성공적으로 업로드된다
    And 텍스트가 세그먼트로 분할된다
    And 세그먼트 목록이 미리보기에 표시된다
```

### AC-002: 파일 선택 버튼을 통한 업로드

```gherkin
  Scenario: 파일 선택 버튼 클릭
    Given 사용자가 업로드 페이지에 있다
    When 사용자가 "파일 선택" 버튼을 클릭한다
    Then 파일 탐색기가 열린다
    And .txt 파일만 선택 가능하다
```

### AC-003: 세그먼트 저장

```gherkin
  Scenario: 세그먼트 확인 및 저장
    Given 파일이 업로드되고 세그먼트로 분할되었다
    And 세그먼트가 미리보기에 표시되고 있다
    When 사용자가 "확인" 버튼을 클릭한다
    Then 세그먼트가 uploadStore에 저장된다
    And 사용자에게 저장 완료 메시지가 표시된다
```

---

## 2. 에러 처리 시나리오

### AC-004: 잘못된 파일 형식 거부

```gherkin
Feature: 파일 유효성 검증
  시스템은 .txt 외의 파일 형식을 거부한다

  Scenario: .pdf 파일 업로드 시도
    Given 사용자가 업로드 페이지에 있다
    And .pdf 파일이 있다
    When 사용자가 파일을 드롭존에 드래그 앤 드롭한다
    Then 파일이 거부된다
    And "지원하지 않는 파일 형식입니다. .txt 파일만 업로드 가능합니다." 에러 메시지가 표시된다

  Scenario: .docx 파일 업로드 시도
    Given 사용자가 업로드 페이지에 있다
    And .docx 파일이 있다
    When 사용자가 파일을 드롭존에 드래그 앤 드롭한다
    Then 파일이 거부된다
    And "지원하지 않는 파일 형식입니다. .txt 파일만 업로드 가능합니다." 에러 메시지가 표시된다
```

### AC-005: 파일 크기 초과 거부

```gherkin
  Scenario: 1MB 초과 파일 업로드 시도
    Given 사용자가 업로드 페이지에 있다
    And 1.5MB 크기의 .txt 파일이 있다
    When 사용자가 파일을 드롭존에 드래그 앤 드롭한다
    Then 파일이 거부된다
    And "파일 크기가 너무 큽니다. 1MB 이하의 파일만 업로드 가능합니다." 에러 메시지가 표시된다
```

### AC-006: 빈 파일 거부

```gherkin
  Scenario: 빈 .txt 파일 업로드 시도
    Given 사용자가 업로드 페이지에 있다
    And 내용이 없는 빈 .txt 파일이 있다
    When 사용자가 파일을 드롭존에 드래그 앤 드롭한다
    Then 파일이 거부된다
    And "빈 파일은 업로드할 수 없습니다." 에러 메시지가 표시된다
```

---

## 3. 상태 관리 시나리오

### AC-007: 업로드 진행 상태 표시

```gherkin
Feature: 상태 표시
  시스템은 업로드 진행 상태를 사용자에게 표시한다

  Scenario: 업로드 중 로딩 표시
    Given 사용자가 유효한 .txt 파일을 드롭존에 드롭했다
    When 파일이 처리 중이다
    Then 로딩 인디케이터가 표시된다
    And 드롭존이 비활성화된다
```

### AC-008: 에러 상태에서 재시도

```gherkin
  Scenario: 에러 후 재시도
    Given 파일 업로드 중 에러가 발생했다
    And 에러 메시지가 표시되고 있다
    When 사용자가 "재시도" 버튼을 클릭한다
    Then 에러 상태가 초기화된다
    And 드롭존이 다시 활성화된다
```

---

## 4. 세그먼트 편집 시나리오

### AC-009: 세그먼트 경계 조정

```gherkin
Feature: 세그먼트 편집
  사용자가 세그먼트 경계를 조정할 수 있다

  Scenario: 세그먼트 텍스트 수정
    Given 파일이 업로드되고 세그먼트로 분할되었다
    When 사용자가 특정 세그먼트를 클릭한다
    And 텍스트를 수정한다
    Then 미리보기가 실시간으로 업데이트된다
```

### AC-010: 세그먼트 병합

```gherkin
  Scenario: 두 세그먼트 병합
    Given 파일이 업로드되고 최소 2개의 세그먼트가 있다
    When 사용자가 인접한 두 세그먼트를 선택한다
    And "병합" 버튼을 클릭한다
    Then 두 세그먼트가 하나로 합쳐진다
    And 세그먼트 목록이 업데이트된다
```

---

## 5. 접근성 시나리오

### AC-011: 키보드 네비게이션

```gherkin
Feature: 접근성
  키보드만으로 모든 기능을 사용할 수 있다

  Scenario: Tab 키로 네비게이션
    Given 사용자가 업로드 페이지에 있다
    When 사용자가 Tab 키를 누른다
    Then 포커스가 드롭존 → 파일 선택 버튼 → 세그먼트 목록 순서로 이동한다

  Scenario: Enter 키로 파일 선택
    Given 포커스가 "파일 선택" 버튼에 있다
    When 사용자가 Enter 키를 누른다
    Then 파일 탐색기가 열린다
```

---

## 6. 품질 게이트 기준

### 6.1 테스트 커버리지

| 항목 | 기준 |
|------|------|
| 단위 테스트 커버리지 | >= 85% |
| 통합 테스트 | 모든 시나리오 통과 |
| E2E 테스트 | 주요 워크플로우 통과 |

### 6.2 성능 기준

| 항목 | 기준 |
|------|------|
| 파일 파싱 시간 | < 500ms (1MB 파일 기준) |
| UI 응답 시간 | < 100ms |
| 메모리 사용량 | < 50MB 증가 |

### 6.3 접근성 기준

| 항목 | 기준 |
|------|------|
| WCAG 2.1 Level AA | 준수 |
| 키보드 네비게이션 | 모든 기능 접근 가능 |
| 스크린 리더 호환 | 주요 기능 동작 |

---

## 7. Definition of Done (완료 정의)

- [ ] 모든 인수 조건 시나리오 통과
- [ ] 단위 테스트 커버리지 85% 이상
- [ ] TypeScript strict 모드 에러 없음
- [ ] ESLint 경고/에러 없음
- [ ] 코드 리뷰 완료
- [ ] 반응형 레이아웃 검증 (모바일, 태블릿, 데스크톱)
- [ ] 접근성 테스트 통과
- [ ] 성능 기준 충족
